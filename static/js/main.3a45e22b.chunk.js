(this["webpackJsonpengineering-health-dashboard"]=this["webpackJsonpengineering-health-dashboard"]||[]).push([[0],{343:function(e,t,n){},344:function(e,t,n){},479:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n(0),c=n.n(a),i=n(17),o=n.n(i),s=(n(343),n(19)),d=n(151),l=n(161),j=(n(344),n(587)),u=n(557),b=n(560),h=n(561),O=n(559),x="#2C343F",f="#1D2228",v={DE:"Data dev",INFRASTRUCTURE:"Infrastructure",NOMAD:"Nomad",HE:"Hardware"},m=Object(j.a)(u.a)({background:"#FFDD00",color:f});function g(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(O.a,{}),Object(r.jsx)(m,{children:Object(r.jsx)(b.a,{children:Object(r.jsx)(h.a,{variant:"h6",children:"Engineering Health Dashboard"})})}),Object(r.jsx)(b.a,{})]})}var p=n(577),y=n(313),T=n(480),C=n(580),R=n(154),F={"geospatial-growth-hack":v.DE,mothership:v.INFRASTRUCTURE,"web-server":v.INFRASTRUCTURE,dbt:v.INFRASTRUCTURE,partners:v.INFRASTRUCTURE,atlas:v.NOMAD,"dirtmate-edge":v.HE,"3p":v.DE,"aeropoints-fulfillers":v.HE,"aeropoints-firmware":v.HE};function E(e){var t=function(e,t){var n=e.data.search.edges;if(n){var r=/https:\/\/github.com\/PropellerAero\/(.*?)\//;t&&(n=n.filter((function(e){var n=r.exec(e.node.url);return n?v[t]===F[n[1]]:null})));var a=[{day:0,count:0,dayName:"Sunday"},{day:1,count:0,dayName:"Monday"},{day:2,count:0,dayName:"Tuesday"},{day:3,count:0,dayName:"Wednesday"},{day:4,count:0,dayName:"Thursday"},{day:5,count:0,dayName:"Friday"},{day:6,count:0,dayName:"Saturday"}];return n.forEach((function(e){var t=new Date(e.node.createdAt).getDay(),n=a.find((function(e){return e.day===t}));n&&n.count++})),a}}(e.data,e.team);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(b.a,{children:Object(r.jsx)(h.a,{variant:"h6",component:"div",children:"Pull Requests Raised Across Propeller"})}),Object(r.jsx)(R.a,{margin:{top:30,right:80,bottom:80,left:80},data:t,indexBy:"dayName",keys:["count"],labelTextColor:x,enableGridX:!1,colors:"#28AFB0",theme:{axis:{ticks:{line:{stroke:f},text:{fill:f}}}}})]})}var S=n(569),k=n(570),w=n(571),A=n(572),D=n(573),N=n(574),P=n(307),I=n.n(P);function B(e){var t=e.data,n=t?function(e){var t=e.data.search.edges.map((function(e){var t,n;return null===e||void 0===e||null===(t=e.node)||void 0===t||null===(n=t.author)||void 0===n?void 0:n.login}));return Object.entries(I()(t)).sort((function(e,t){return t[1]-e[1]})).slice(0,5)}(t):[];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(b.a,{children:Object(r.jsx)(h.a,{variant:"h6",component:"div",children:"Pull Request Leaderboard"})}),Object(r.jsx)(S.a,{children:Object(r.jsxs)(k.a,{"aria-label":"simple table",children:[Object(r.jsx)(w.a,{children:Object(r.jsxs)(A.a,{children:[Object(r.jsx)(D.a,{children:"Position"}),Object(r.jsx)(D.a,{children:"Name"}),Object(r.jsx)(D.a,{children:"PRs Opened"})]})}),Object(r.jsx)(N.a,{children:n.map((function(e,t){return Object(r.jsxs)(A.a,{children:[Object(r.jsx)(D.a,{children:t+1}),Object(r.jsxs)(D.a,{children:[0===t&&Object(r.jsx)("span",{children:"\ud83d\udc51 "}),e[0]]}),Object(r.jsx)(D.a,{children:e[1]})]},t)}))})]})})]})}var _=n(585),U=n(583),H=n(578),M=n(589),L=n(590);function W(){var e=Object(d.a)(["\n  min-height: 450px;\n  width: 100%;\n  top: 0;\n"]);return W=function(){return e},e}var q=l.a.div(W()),G=Object(j.a)(_.a)({display:"flex",alignItems:"center",justifyContent:"center"}),K=Object(j.a)(U.a)({width:200}),J=Object(j.a)(T.a)({width:"60%",outline:"none"});function X(e){var t=c.a.useRef(null);return Object(r.jsx)("div",{ref:t,children:Object(r.jsx)(G,{disablePortal:!0,disableEnforceFocus:!0,disableAutoFocus:!0,open:!0,"aria-labelledby":"server-modal-title","aria-describedby":"server-modal-description",onBackdropClick:e.closeModal,children:Object(r.jsx)(J,{children:Object(r.jsxs)(p.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:10,children:[Object(r.jsx)(p.a,{xs:8,item:!0,children:e.chart}),Object(r.jsx)(p.a,{xs:4,item:!0,children:Object(r.jsxs)(q,{children:[Object(r.jsx)(b.a,{children:Object(r.jsx)(h.a,{component:"div",children:"Filters:"})}),Object(r.jsxs)(H.a,{children:[Object(r.jsx)(M.a,{id:"demo-simple-select-label",children:"By team"}),Object(r.jsxs)(K,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:e.team,onChange:function(t){return e.selectTeam(t.target.value)},children:[Object(r.jsx)(L.a,{value:"",children:"None"}),Object.entries(v).map((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(r.jsx)(L.a,{value:n,children:String(a)})}))]})]})]})})]})})})})}var z=n(311),V=n(219),Q={radius:8,depth:1,color:"rgb(97, 205, 187)"},Y=function(e){var t,n,r=[],a=[],c=null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.search)||void 0===n?void 0:n.edges;if(!c)return{nodes:r,links:a};var i=function(e){return r.find((function(t){return t.id===e}))};return c.forEach((function(e){var t,n,c,o,s=null===(t=e.node)||void 0===t||null===(n=t.author)||void 0===n?void 0:n.login,d=null===(c=e.node)||void 0===c||null===(o=c.reviews)||void 0===o?void 0:o.nodes;i(s)||r.push(Object(V.a)({id:s},Q)),d&&d.length>0&&d.forEach((function(e){var t=e.author.login,n=i(t);n?(n.radius+=1,n.color=Math.random()>.5?"rgb(232, 193, 160)":"rgb(244, 117, 96)"):r.push(Object(V.a)({id:t},Q));var c=function(e,t){return a.find((function(n){return n.source===e&&n.target===t||n.source===t&&n.target===e}))}(s,t);c?c.distance+=100:a.push({source:s,target:t,distance:100})}))})),{nodes:r,links:a}};function Z(e){var t=Y(e.data),n=t.nodes,a=t.links;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(b.a,{children:Object(r.jsx)(h.a,{variant:"h6",component:"div",children:"Propeller PR Review Network"})}),Object(r.jsx)(z.a,{nodes:n,links:a,margin:{top:0,right:0,bottom:0,left:0},repulsivity:30,iterations:500,nodeColor:function(e){return e.color},nodeBorderWidth:1,nodeBorderColor:{from:"color",modifiers:[["darker",.8]]},linkThickness:function(e){return 2*(2-e.source.depth)},motionStiffness:160,motionDamping:12})]})}var $=n(90),ee=n(579),te=n(584),ne=n(312),re=n.n(ne);function ae(e){var t=function(e){var t=e.data.search.edges.map((function(e){var t=e.node,n=t.createdAt,r=t.closedAt,a=Object(ee.a)(n),c=Object(ee.a)(r);return Object(te.a)(c,a)})),n=Math.max.apply(Math,Object($.a)(t)),r=Math.min(n,10);return re()(r).map((function(e){return[1*e,1*(e+1)]})).map((function(e){return{id:"".concat(e[0]," - ").concat(e[1]),value:t.filter((function(t){return t<=e[1]&&t>e[0]})).length}}))}(e.data);return console.log({histData:t}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(b.a,{children:Object(r.jsx)(h.a,{variant:"h6",component:"div",children:"Pull Requests Business Days To Close"})}),Object(r.jsx)(R.a,{margin:{top:30,right:80,bottom:80,left:80},data:t,labelTextColor:x,enableGridX:!1,colors:"#28AFB0",theme:{axis:{ticks:{line:{stroke:f},text:{fill:f}}}}})]})}var ce=Object(j.a)(T.a)({height:500,width:"100%",padding:40,margin:20,outline:"none"}),ie=function(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],i=n[1],o=e.isClickable,d=e.team,l=e.setTeam;return Object(r.jsxs)(r.Fragment,{children:[c&&Object(r.jsx)(X,{closeModal:function(){return i(!1)},chart:e.children,selectTeam:function(e){return l(e)},team:d}),Object(r.jsx)(p.a,{onClick:function(){return o&&i(!0)},md:12,lg:6,item:!0,children:Object(r.jsx)(ce,{children:e.children})})]})};function oe(e){var t,n=Object(y.a)("https://github-monitor.services.dev.propelleraero.com/prs_by_dev/",(t=e.password,function(e){var n=new Headers;return n.set("Authorization","Basic "+btoa("propeller:"+t)),fetch(e,{method:"GET",headers:n}).then((function(e){return e.json()}))})).data,c=Object(a.useState)(""),i=Object(s.a)(c,2),o=i[0],d=i[1];return Object(r.jsxs)(p.a,{container:!0,direction:"row",justify:"center",alignItems:"center",alignContent:"center",spacing:10,children:[Object(r.jsx)(ie,{children:n?Object(r.jsx)(B,{data:n}):Object(r.jsx)(C.a,{})}),Object(r.jsx)(ie,{isClickable:!0,team:o,setTeam:d,children:n?Object(r.jsx)(E,{data:n,team:o}):Object(r.jsx)(C.a,{})}),Object(r.jsx)(ie,{children:n?Object(r.jsx)(ae,{data:n}):Object(r.jsx)(C.a,{})}),Object(r.jsx)(p.a,{xs:6,item:!0,children:Object(r.jsx)(ce,{children:n?Object(r.jsx)(Z,{data:n}):Object(r.jsx)(C.a,{})})})]})}var se=n(591),de=n(581),le=Object(j.a)(_.a)({display:"flex",alignItems:"center",justifyContent:"center"}),je=Object(j.a)(T.a)({width:"60%",outline:"none",padding:100,textAlign:"center"});function ue(e){var t=c.a.useRef(null);return Object(r.jsx)("div",{ref:t,children:Object(r.jsx)(le,{disablePortal:!0,disableEnforceFocus:!0,disableAutoFocus:!0,open:!0,"aria-labelledby":"server-modal-title","aria-describedby":"server-modal-description",onBackdropClick:function(){},children:Object(r.jsx)(je,{children:e.children})})})}function be(e){var t=Object(a.useState)(""),n=Object(s.a)(t,2),c=n[0],i=n[1];return Object(r.jsxs)(ue,{children:[Object(r.jsx)(se.a,{type:"password",label:"Password",value:c,onChange:function(e){return i(e.target.value)}}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)(de.a,{color:"primary",variant:"contained",onClick:function(t){e.onSubmit(c)},children:"Login"})]})}function he(){var e=Object(d.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  padding: 100px;\n"]);return he=function(){return e},e}var Oe=l.a.div(he());var xe=function(){var e=Object(a.useState)(Object({NODE_ENV:"production",PUBLIC_URL:"/engineering-health-dashboard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PASSWORD),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(r.jsx)(Oe,{children:n?Object(r.jsxs)(r.Fragment,{children:[" ",Object(r.jsx)(g,{}),Object(r.jsx)(oe,{password:n})]}):Object(r.jsx)(be,{onSubmit:function(e){return c(e)}})})},fe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,592)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};o.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(xe,{})}),document.getElementById("root")),fe()}},[[479,1,2]]]);
//# sourceMappingURL=main.3a45e22b.chunk.js.map