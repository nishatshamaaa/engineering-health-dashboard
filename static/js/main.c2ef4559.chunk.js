(this["webpackJsonpengineering-health-dashboard"]=this["webpackJsonpengineering-health-dashboard"]||[]).push([[0],{343:function(e,t,n){},344:function(e,t,n){},479:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n(0),c=n.n(a),i=n(17),o=n.n(i),s=(n(343),n(19)),d=n(126),l=n(131),j=(n(344),n(587)),u=n(557),b=n(560),h=n(561),O=n(559),x="#2C343F",f="#1D2228",v={DE:"Data dev",INFRASTRUCTURE:"Infrastructure",NOMAD:"Nomad",HE:"Hardware"},m=Object(j.a)(u.a)({background:"#FFDD00",color:f});function g(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(O.a,{}),Object(r.jsx)(m,{children:Object(r.jsx)(b.a,{children:Object(r.jsx)(h.a,{variant:"h6",children:"Engineering Health Dashboard"})})}),Object(r.jsx)(b.a,{})]})}var p=n(577),y=n(313),C=n(480),F=n(580),T=n(155),R={"geospatial-growth-hack":v.DE,mothership:v.INFRASTRUCTURE,"web-server":v.INFRASTRUCTURE,dbt:v.INFRASTRUCTURE,partners:v.INFRASTRUCTURE,atlas:v.NOMAD,"dirtmate-edge":v.HE,"3p":v.DE,"aeropoints-fulfillers":v.HE,"aeropoints-firmware":v.HE};function E(e){var t=function(e,t){var n=e.data.search.edges;if(n){var r=/https:\/\/github.com\/PropellerAero\/(.*?)\//;t&&(n=n.filter((function(e){var n=r.exec(e.node.url);return n?v[t]===R[n[1]]:null})));var a=[{day:0,count:0,dayName:"Sunday"},{day:1,count:0,dayName:"Monday"},{day:2,count:0,dayName:"Tuesday"},{day:3,count:0,dayName:"Wednesday"},{day:4,count:0,dayName:"Thursday"},{day:5,count:0,dayName:"Friday"},{day:6,count:0,dayName:"Saturday"}];return n.forEach((function(e){var t=new Date(e.node.createdAt).getDay(),n=a.find((function(e){return e.day===t}));n&&n.count++})),a}}(e.data,e.team);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(b.a,{children:Object(r.jsx)(h.a,{variant:"h6",component:"div",children:"Pull Requests Raised Across Propeller"})}),Object(r.jsx)(T.a,{margin:{top:30,right:80,bottom:80,left:80},data:t,indexBy:"dayName",keys:["count"],labelTextColor:x,enableGridX:!1,colors:"#28AFB0",theme:{axis:{ticks:{line:{stroke:f},text:{fill:f}}}}})]})}var S=n(569),k=n(570),w=n(571),A=n(572),P=n(573),D=n(574),N=n(307),I=n.n(N);function B(e){var t=e.data,n=t?function(e){var t=e.data.search.edges.map((function(e){var t,n;return null===e||void 0===e||null===(t=e.node)||void 0===t||null===(n=t.author)||void 0===n?void 0:n.login}));return Object.entries(I()(t)).sort((function(e,t){return t[1]-e[1]})).slice(0,5)}(t):[];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(b.a,{children:Object(r.jsx)(h.a,{variant:"h6",component:"div",children:"Pull Request Leaderboard"})}),Object(r.jsx)(S.a,{children:Object(r.jsxs)(k.a,{"aria-label":"simple table",children:[Object(r.jsx)(w.a,{children:Object(r.jsxs)(A.a,{children:[Object(r.jsx)(P.a,{children:"Position"}),Object(r.jsx)(P.a,{children:"Name"}),Object(r.jsx)(P.a,{children:"PRs Opened"})]})}),Object(r.jsx)(D.a,{children:n.map((function(e,t){return Object(r.jsxs)(A.a,{children:[Object(r.jsx)(P.a,{children:t+1}),Object(r.jsxs)(P.a,{children:[0===t&&Object(r.jsx)("span",{children:"\ud83d\udc51 "}),e[0]]}),Object(r.jsx)(P.a,{children:e[1]})]},t)}))})]})})]})}var _=n(585),U=n(583),H=n(578),M=n(589),L=n(590);function W(){var e=Object(d.a)(["\n  height: 500px;\n  width: 100%;\n  padding: 40px;\n  margin: 20px;\n"]);return W=function(){return e},e}function q(){var e=Object(d.a)(["\n  min-height: 450px;\n  width: 100%;\n  top: 0;\n"]);return q=function(){return e},e}var G=l.a.div(q()),K=l.a.div(W()),J=Object(j.a)(_.a)({display:"flex",alignItems:"center",justifyContent:"center"}),X=Object(j.a)(U.a)({width:200}),z=Object(j.a)(C.a)({width:"60%",outline:"none"});function V(e){var t=c.a.useRef(null);return console.log(e.chart),Object(r.jsx)("div",{ref:t,children:Object(r.jsx)(J,{disablePortal:!0,disableEnforceFocus:!0,disableAutoFocus:!0,open:!0,"aria-labelledby":"server-modal-title","aria-describedby":"server-modal-description",onBackdropClick:e.closeModal,children:Object(r.jsx)(z,{children:Object(r.jsxs)(p.a,{container:!0,direction:"row",justify:"center",alignItems:"center",spacing:10,children:[Object(r.jsx)(p.a,{xs:8,item:!0,children:Object(r.jsx)(K,{children:e.chart})}),e.showFilter&&Object(r.jsx)(p.a,{xs:4,item:!0,children:Object(r.jsxs)(G,{children:[Object(r.jsx)(b.a,{children:Object(r.jsx)(h.a,{component:"div",children:"Filters:"})}),Object(r.jsxs)(H.a,{children:[Object(r.jsx)(M.a,{id:"demo-simple-select-label",children:"By team"}),Object(r.jsxs)(X,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:e.team,onChange:function(t){return e.selectTeam(t.target.value)},children:[Object(r.jsx)(L.a,{value:"",children:"None"}),Object.entries(v).map((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1];return Object(r.jsx)(L.a,{value:n,children:String(a)})}))]})]})]})})]})})})})}var Q=n(311),Y=n(219),Z={radius:8,depth:1,color:"rgb(97, 205, 187)"},$=function(e){var t,n,r=[],a=[],c=null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.search)||void 0===n?void 0:n.edges;if(!c)return{nodes:r,links:a};var i=function(e){return r.find((function(t){return t.id===e}))};return c.forEach((function(e){var t,n,c,o,s=null===(t=e.node)||void 0===t||null===(n=t.author)||void 0===n?void 0:n.login,d=null===(c=e.node)||void 0===c||null===(o=c.reviews)||void 0===o?void 0:o.nodes;i(s)||r.push(Object(Y.a)({id:s},Z)),d&&d.length>0&&d.forEach((function(e){var t=e.author.login,n=i(t);n?(n.radius+=1,n.color=Math.random()>.5?"rgb(232, 193, 160)":"rgb(244, 117, 96)"):r.push(Object(Y.a)({id:t},Z));var c=function(e,t){return a.find((function(n){return n.source===e&&n.target===t||n.source===t&&n.target===e}))}(s,t);c?c.distance+=100:a.push({source:s,target:t,distance:100})}))})),{nodes:r,links:a}};function ee(e){var t=$(e.data),n=t.nodes,a=t.links;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(b.a,{children:Object(r.jsx)(h.a,{variant:"h6",component:"div",children:"Propeller PR Review Network"})}),Object(r.jsx)(Q.a,{nodes:n,links:a,margin:{top:0,right:0,bottom:0,left:0},repulsivity:30,iterations:500,nodeColor:function(e){return e.color},nodeBorderWidth:1,nodeBorderColor:{from:"color",modifiers:[["darker",.8]]},linkThickness:function(e){return 2*(2-e.source.depth)},motionStiffness:160,motionDamping:12})]})}var te=n(90),ne=n(579),re=n(584),ae=n(312),ce=n.n(ae);function ie(e){var t=function(e){var t=e.data.search.edges.map((function(e){var t=e.node,n=t.createdAt,r=t.closedAt,a=Object(ne.a)(n),c=Object(ne.a)(r);return Object(re.a)(c,a)})),n=Math.max.apply(Math,Object(te.a)(t)),r=Math.min(n,10);return ce()(r).map((function(e){return[1*e,1*(e+1)]})).map((function(e){return{id:"".concat(e[0]," - ").concat(e[1]),value:t.filter((function(t){return t<=e[1]&&t>e[0]})).length}}))}(e.data);return console.log({histData:t}),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(b.a,{children:Object(r.jsx)(h.a,{variant:"h6",component:"div",children:"Pull Requests Business Days To Close"})}),Object(r.jsx)(T.a,{margin:{top:30,right:80,bottom:80,left:80},data:t,labelTextColor:x,enableGridX:!1,colors:"#28AFB0",theme:{axis:{ticks:{line:{stroke:f},text:{fill:f}}}}})]})}var oe=Object(j.a)(C.a)({height:500,width:"100%",padding:40,margin:20,outline:"none"}),se=function(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],i=n[1],o=e.isClickable,d=e.team,l=e.setTeam;return Object(r.jsxs)(r.Fragment,{children:[c&&Object(r.jsx)(V,{closeModal:function(){return i(!1)},chart:e.children,selectTeam:function(e){return l(e)},team:d,showFilter:e.filterPanel}),Object(r.jsx)(p.a,{onClick:function(){return o&&i(!0)},md:12,lg:6,item:!0,children:Object(r.jsx)(oe,{children:e.children})})]})};function de(e){var t,n=Object(y.a)("https://github-monitor.services.dev.propelleraero.com/prs_by_dev/",(t=e.password,function(e){var n=new Headers;return n.set("Authorization","Basic "+btoa("propeller:"+t)),fetch(e,{method:"GET",headers:n}).then((function(e){return e.json()}))})).data,c=Object(a.useState)(""),i=Object(s.a)(c,2),o=i[0],d=i[1];return Object(r.jsxs)(p.a,{container:!0,direction:"row",justify:"center",alignItems:"center",alignContent:"center",spacing:10,children:[Object(r.jsx)(se,{children:n?Object(r.jsx)(B,{data:n}):Object(r.jsx)(F.a,{})}),Object(r.jsx)(se,{isClickable:!0,team:o,setTeam:d,filterPanel:!0,children:n?Object(r.jsx)(E,{data:n,team:o}):Object(r.jsx)(F.a,{})}),Object(r.jsx)(se,{children:n?Object(r.jsx)(ie,{data:n}):Object(r.jsx)(F.a,{})}),Object(r.jsx)(se,{isClickable:!0,children:n?Object(r.jsx)(ee,{data:n}):Object(r.jsx)(F.a,{})})]})}var le=n(591),je=n(581),ue=Object(j.a)(_.a)({display:"flex",alignItems:"center",justifyContent:"center"}),be=Object(j.a)(C.a)({width:"60%",outline:"none",padding:100,textAlign:"center"});function he(e){var t=c.a.useRef(null);return Object(r.jsx)("div",{ref:t,children:Object(r.jsx)(ue,{disablePortal:!0,disableEnforceFocus:!0,disableAutoFocus:!0,open:!0,"aria-labelledby":"server-modal-title","aria-describedby":"server-modal-description",onBackdropClick:function(){},children:Object(r.jsx)(be,{children:e.children})})})}function Oe(e){var t=Object(a.useState)(""),n=Object(s.a)(t,2),c=n[0],i=n[1];return Object(r.jsxs)(he,{children:[Object(r.jsx)(le.a,{type:"password",label:"Password",value:c,onChange:function(e){return i(e.target.value)}}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)(je.a,{color:"primary",variant:"contained",onClick:function(t){e.onSubmit(c)},children:"Login"})]})}function xe(){var e=Object(d.a)(["\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n  padding: 100px;\n"]);return xe=function(){return e},e}var fe=l.a.div(xe());var ve=function(){var e=Object(a.useState)(Object({NODE_ENV:"production",PUBLIC_URL:"/engineering-health-dashboard",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PASSWORD),t=Object(s.a)(e,2),n=t[0],c=t[1];return Object(r.jsx)(fe,{children:n?Object(r.jsxs)(r.Fragment,{children:[" ",Object(r.jsx)(g,{}),Object(r.jsx)(de,{password:n})]}):Object(r.jsx)(Oe,{onSubmit:function(e){return c(e)}})})},me=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,592)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};o.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(ve,{})}),document.getElementById("root")),me()}},[[479,1,2]]]);
//# sourceMappingURL=main.c2ef4559.chunk.js.map